<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta
          name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />
  <link
          rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
          crossorigin="anonymous"
  />
  <link
          href="https://fonts.cdnfonts.com/css/neue-haas-grotesk-display-pro"
          rel="stylesheet"
  />
  <link
          rel="apple-touch-icon"
          sizes="180x180"
          href="{{ url_for('static', filename='favicon/apple-touch-icon.png') }}"
  />
  <link
          rel="icon"
          type="image/png"
          sizes="32x32"
          href="{{ url_for('static', filename='favicon/favicon-32x32.png') }}"
  />
  <link
          rel="icon"
          type="image/png"
          sizes="16x16"
          href="{{ url_for('static', filename='favicon/favicon-16x16.png') }}"
  />
  <link
          rel="manifest"
          href="{{ url_for('static', filename='favicon/site.webmanifest') }}"
  />
  <link
          rel="mask-icon"
          href="{{ url_for('static', filename='favicon/safari-pinned-tab.svg') }}"
          color="#5bbad5"
  />
  <meta name="msapplication-TileColor" content="#da532c"/>
  <meta name="theme-color" content="#ffffff"/>
  <title>Profile Info</title>
  <!-- Link to the external CSS and JS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.1/handlebars.js"></script>
  <script src="{{ url_for('static', filename='js/profile.js') }}"></script>
</head>

<body>
<div class="container">
  <h1 class="mt-3 mb-3">Profile</h1>
  <div id="content">
    <a href="https://rawcsav.com" class="homepage-link">
      <img
              src="https://res.cloudinary.com/dn9bcrimg/image/upload/v1691358044/Screenshot_2023-08-03_at_12.28.52_AM_o9i44t-removebg-preview_r3lypt.png"
              alt="Homepage"
      />
    </a>
    <!-- Profile section -->
    <section class="card">
      <div style="display: flex; align-items: center">
        {% if data.images %}
        <div style="margin-right: 20px">
          <img
                  class="media-object"
                  width="150"
                  src="{{ data.images.0.url }}"
          />
        </div>
        {% endif %}
        <div class="media-body">
          <h1>Logged in as <i>{{ data.display_name }}</i></h1>
          <dl>
            <dt>Id:</dt>
            <dd>{{ data.id }}</dd>
            <dt>Email:</dt>
            <dd>{{ data.email }}</dd>
            <dt>Country:</dt>
            <dd>{{ data.country }}</dd>
            <dt>Followers:</dt>
            <dd>{{ data.followers.total }}</dd>
            <dt>Account Type:</dt>
            <dd>{{ data.product }}</dd>
            <dt>Spotify Url:</dt>
            <dd>
              <a href="{{ data.external_urls.spotify }}"
              >{{ data.external_urls.spotify }}</a
              >
            </dd>
            <dt>URI:</dt>
            <dd>
              <a href="{{ data.uri }}">{{ data.uri }}</a>
            </dd>
          </dl>
        </div>
      </div>
    </section>
    <!-- Actions section -->
    <section class="card">
      <h2>What would you like to do?</h2>
      <div>
        <a href="{{ url_for('stats.stats') }}" class="btn btn-info"
        >See My Music Stats</a
        >
        <a href="{{ url_for('recommendations.recommendations') }}" class="btn btn-primary"
        >Get Music Recommendations</a
        >
      </div>
    </section>
    <!-- Token Info section -->
    <section class="card">
      <h2>Token Information</h2>
      <dl id="tokens">
        <dt>Access token:</dt>
        <dd class="text-truncate">{{ tokens.access_token }}</dd>
        <dt>Refresh token:</dt>
        <dd class="text-truncate">{{ tokens.refresh_token }}</dd>
      </dl>
    </section>
  </div>
  <div id="footer" class="text-center">
    <div class="container">
      <div class="footer-buttons">
        <button
                type="button"
                class="btn btn-success btn-xs"
                onclick="refreshTokens()"
        >
          Refresh Token
        </button>
        <a href="/logout" class="btn btn-danger btn-xs">Logout</a>
      </div>
    </div>
    <!-- Token info template -->
    <script id="token-template" type="text/x-handlebars-template">
      <dt>Access token:</dt>
      <dd class="text-truncate">{{access_token}}</dd>
      <dt>Refresh token:</dt>
      <dd class="text-truncate">{{refresh_token}}</dd>
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.1/handlebars.js"></script>

  </div>
</div>
</body>
</html>
